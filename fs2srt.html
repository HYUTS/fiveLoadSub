<html>
<!-- FinalSub raw subtitle to .SRT format by Wilson Luniz-->
<head>
<script>
var resultLines = '';
function testing() {
var subLines = document.getElementById('rawLinesTextarea').value;
var arrayRaw = subLines.split(/\n/);
var arraySub = new Array();
var arrayStart = new Array();
var arrayEnd = new Array(); 
resultLines = '';

for (var i=0; i < arrayRaw.length; i++) {
  // only push this line if it contains a non whitespace character.
  if (arrayRaw[i].length > 26) {
    arrayStart.push(arrayRaw[i].substr(1,11));
    arrayStart[arrayStart.length-1] = arrayStart[arrayStart.length-1].substring(0,arrayStart[arrayStart.length-1].length-3) + ',' +(Math.round(parseInt(arrayStart[arrayStart.length-1].substring(9,11))/30*1000)).toString();

    arrayEnd.push(arrayRaw[i].substr(arrayRaw[i].length-12,11));
    arrayEnd[arrayEnd.length-1] = arrayEnd[arrayEnd.length-1].substring(0,arrayEnd[arrayEnd.length-1].length-3) + ',' + (Math.round(parseInt(arrayEnd[arrayEnd.length-1].substring(9,11))/30*1000)).toString();

    arraySub.push(arrayRaw[i].substring(13,arrayRaw[i].length-13));
    
  }
}
for (var i=0; i < arrayStart.length; i++) {
  resultLines += i.toString() + '\n' + arrayStart[i] + ' --> ' + arrayEnd[i] + '\n' + arraySub[i]+'\n'+'\n'; 
  
}


document.getElementById('resultTextarea').value = resultLines;
}
</script>
<style>
textarea {
  width:400px;
  height:700px;
}
</style>
</head>
<body>
<h1>FinalSub -> SRT </h1>
<br/>
<textarea id="rawLinesTextarea" onchange="javascript:testing();"></textarea>
<textarea id="resultTextarea"></textarea>
</body>
</html>
